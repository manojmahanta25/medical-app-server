<!DOCTYPE html>
<html lang="en">
 <head>
   <meta charset="UTF-8" />
   <meta name="viewport" content="width=device-width, initial-scale=1.0" />
   <meta http-equiv="X-UA-Compatible" content="ie=edge" />
   <title>Socket.io Example</title>
 </head>

 <body>
   <h1>Our Socket.io Chat Application</h1>
   <div>
     <h2>Messages</h2>
     <ul></ul>
   </div>
   <form action="">
     <input type="text" />
     <button>Send</button>
   </form>
   <script src="~/Scripts/jquery-2.0.3.js" type="text/javascript"></script>
<script src="~/Scripts/jquery_cookie.js" type="text/javascript"></script>
   
   <script src ="/socket.io/socket.io.js"> </script>
   <script>
     const socket = io('ws://localhost:3000',{  autoConnect: false });
     console.log(socket.id); // undefined
     let value = $.cookie("access_token");
     if(value && value !=null)
     {
         socket.open();
     }
    socket.on('connect', () => {
    console.log(socket.id); // 'G5p5...'
            
    });
    socket.on('error', function (reason){
              console.error('Unable to connect Socket.IO', reason);
            });

    socket.on('disconnect', (reason) => {
  if (reason === 'io server disconnect') {
    // the disconnection was initiated by the server, you need to reconnect manually
    socket.connect();
  }
  
  // else the socket will automatically try to reconnect
});
   </script>
 </body>
</html>